# server {
# 	listen					5050 default_server;
# 	root					/home/www/;
# 	include					/etc/nginx/mime.types;

# 	index	index.html index.htm index.php;

# 	location / {
# 		autoindex on;
# 		autoindex_localtime on;
# 		autoindex_exact_size off;
# 		try_files $uri $uri/ /=404;
# 	}

# 	location ~ \.php$ {
#         fastcgi_pass unix:/run/php/php7.3-fpm.sock;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         include fastcgi_params;
#         include snippets/fastcgi-php.conf;
#     }
# }

server {
	listen 5050 ssl default_server;
	listen [::]:5050 default_server;
	ssl_certificate			/etc/ssl/certs/nginx-selfsigned.crt;
	ssl_certificate_key		/etc/ssl/private/nginx-selfsigned.key;

	root	/home/www/;
	index	index.php index.html index.htm;

	location / {
		try_files $uri $uri/ /index.php?$query_string;
	}
# You may need this to prevent return 404 recursion.
	location = /404.html {
		internal;
	}
# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
	location ~ \.php$ {
		try_files $uri /index.php =404;
		fastcgi_split_path_info ^(.+\.php)(/.+)$;
		fastcgi_pass   0.0.0.0:9000;
		fastcgi_index  index.php;
		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
		include fastcgi_params;
	}
}